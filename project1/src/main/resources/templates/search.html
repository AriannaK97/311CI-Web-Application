<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<html lang="en">
<head>
    <title>Search</title>
    <meta charset="utf-8">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap DatePicker</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.11/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.11/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="home2.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="../static/js/search.js"></script>

    <script th:src="@{/js/search.js}"></script>
    <link th:href="@{/css/search.css}" rel="stylesheet" type="text/css" media="all">


    <style>

        /*for the table*/


    </style>


</head>
<body>

<header role="banner" class="navbar navbar-fixed-top navbar-inverse">
    <div class="container2">
        <div class="navbar-header">
            <button data-toggle="collapse-side" data-target=".side-collapse" data-target-2=".side-collapse-container" type="button" class="navbar-toggle pull-left"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
        </div>
        <div class="navbar-inverse side-collapse in">
            <nav role="navigation" class="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">Home</a></li>
                    <li><a href="/showInsert">Incident Report</a></li>
                    <li><a href="/search">Search</a></li>
                    <li><a href="/login">Login</a></li>
                    <li><a href="/register">Register</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>
<section>
    <div class="row1">
        <h1>Search</h1>
        <p class="row2">Welcome to Chicago Incident Report Platform</p>
        <p class="row2">To search for an incident, please login or register</p>
    </div>
</section>

<div th:text="${searcher}"></div>

<form th:action="@{/processSearch}" th:object="${searcher}" method="post">
    <input type="hidden" th:value="${searcher.secondDate}" name="secondDate">
    <input type="hidden" th:value="${searcher.firstDate}" name="firstDate">
    <input type="hidden" th:value="${searcher.zipcode}" name="zipcode">
    <input type="hidden" th:value="${searcher.streetAddress}" name="streetAddress">
    <input type="hidden" th:value="${searcher.premisesBaited}" name="premisesBaited">
    <input type="hidden" th:value="${searcher.garbagePremises}" name="garbagePremises">
    <input type="hidden" th:value="${searcher.firstLongitude}" name="firstLongitude">
    <input type="hidden" th:value="${searcher.secondLongitude}" name="secondLongitude">
    <input type="hidden" th:value="${searcher.firstLatitude}" name="firstLatitude">
    <input type="hidden" th:value="${searcher.secondLatitude}" name="secondLatitude">
    <input type="hidden" th:value="${searcher.potholes}" name="potholes">
    <input type="hidden" th:value="${searcher.requestType}" name="requestType">
    <input type="hidden" id="page" th:value="${searcher.page}" name="page">
    <button type="submit" id="searchButton" style="display: none"></button>
</form>

<section class="search-sec">
    <div class="container">
        <form th:action="@{/processSearch}" th:object="${searcher}" method="post">
                    <div class="row">
                        <div class="col-lg-8 col-md-6 col-sm-12 input-field ">
                            <select class="form-control search-slt" id="exampleFormControlSelect1" name="searchType" style="white-space: pre-wrap;" >
                                <option value="Other" >Select Search option</option>
                                <option value="1">Requests per type that were created within a specified time range</option>
                                <option value="2">Τotal requests per day for a specific request type and time range</option>
                                <option value="3">Μost common service request per zipcode for a specific date</option>
                                <option value="4">Average completion time per service request for a specific date range</option>
                                <option value="5">Most common service request in a specified bounding box for a specific day</option>
                                <option value="6">Top-5 Special Service Areas (SSA) with regards to total number of requests per day
                                    for a specific date range </option>
                                <option value="7">License plates involved in abandoned vehicle complaints more
                                    than once</option>
                                <option value="8">Second most common color of vehicles involved in abandoned vehicle complaints</option>
                                <option value="9">Rodent baiting requests where the number of premises baited is less than a specified
                                    number</option>
                                <option value="10">Rodent baiting requests where the number of premises with garbage is less than a specified
                                    number</option>
                                <option value="11">Rodent baiting requests where the number of premises with rats is less than a specified
                                    number</option>
                                <option value="12">Police districts that have handled “pot holes” requests with more than one number
                                    of potholes on the same day that they also handled “rodent baiting” requests with more than
                                    one number of premises baited, for a specific day</option>
                                <option value="13">Find Incidents by zip code</option>
                                <option value="14">Find Incidents by street address</option>
                                <option value="15">Find incidents by street address and zip code</option>

                            </select>
                        </div>
                    </div>
                    <div class="row" id="showRow" >
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field  " id="secondDate">
                            <input type="date"  name="secondDate" class="form-control search-slt" placeholder="Enter From Date">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="firstDate">
                            <input type="date"  name="firstDate" class="form-control search-slt" placeholder="Enter To Date">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="zipcode">
                            <input type="text"  name="zipcode" class="form-control search-slt" placeholder="Zip Code">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="streetAddress">
                            <input type="text"  name="streetAddress" class="form-control search-slt" placeholder="Street Address">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="premisesBaited">
                            <input  type="text"  name="premisesBaited" class="form-control search-slt" placeholder="Number of baited premises">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="ratPremises">
                            <input  type="text"  name="ratPremises" class="form-control search-slt" placeholder="Number of premises baited with rats">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="garbagePremises">
                            <input  type="text"  name="garbagePremises" class="form-control search-slt" placeholder="Number of premises baited with garbage">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="firstLongitude">
                            <input  type="text"  name="firstLongitude" class="form-control search-slt" placeholder="firstLongitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="secondLongitude">
                            <input type="text"  name="secondLongitude" class="form-control search-slt" placeholder="secondLongitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12   input-field" id="firstLatitude">
                            <input  type="text"  name="firstLatitude" class="form-control search-slt" placeholder="firstLatitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="secondLatitude">
                            <input type="text"  name="secondLatitude" class="form-control search-slt" placeholder="secondLatitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="potholes">
                            <input type="text"  name="potholes" class="form-control search-slt" placeholder="Number of potholes">
                        </div>

                        <div class="col-lg-3 col-md-3 col-sm-12 input-field" id="requestType">
                            <select  name="requestType" class="form-control search-slt">
                                <option>Select Incident Type</option>
                                <option>Pothole in Street</option>
                                <option>Tree Debris</option>
                                <option>Tree Trim</option>
                                <option>Graffiti Removal</option>
                                <option>Street Light - 1/Out</option>
                                <option>Street Lights - All/Out</option>
                                <option>Street Light Out</option>
                                <option>Rodent Baiting/Rat Complaint</option>
                                <option>Sanitation Code Violation</option>
                                <option>Garbage Cart Black Maintenance/Replacement</option>
                                <option>Abandoned Vehicle Complaint</option>
                            </select>
                        </div>

                        <input type="hidden" th:value="${searcher.page}" name="page">

                        <div class="col-lg-3 col-md-3 col-sm-12 submitForm ">
                            <button   type="submit" class="btn btn-success" aria-pressed="true">Search</button>
                        </div>

                    </div>
        </form>

    </div>
</section>

<section>
    <div class="row3">

        <div th:if= "${objectList != null}">
            <div class="container resultTable row" id="resultsList">
                <div class="row">

                    <div class="col-md-12 col-md-offset-1">

                        <div class="panel panel-default panel-table">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col col-xs-6">
                                        <h3 class="panel-title">Results</h3>
                                    </div>
                                </div>
                            </div>
                            <div th:switch="${searchDto.searchType}" class="panel-body table-responsive">
                                <table  th:case="'1'"  class="table table-bordered table-list">
                                    <thead >
                                        <tr >
                                            <th> Request Type </th>
                                            <th> Count </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr  th:each="listObject : ${objectList}">
                                            <td><span th:text="${listObject[1]}"> Request Type </span></td>
                                            <td><span th:text="${listObject[0]}"> Count </span></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'2'" class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th >
                                            <span> Creation Date </span>
                                        </th>
                                        <th>
                                            <span> Count </span>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> Creation Date</span></td>
                                        <td><span th:text="${listObject[0]}"> Count </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'3'" class="table table-bordered table-list">
                                    <thead>
                                    <tr>
                                        <th> RequestType </th>
                                        <th> Count </th>
                                        <th> Zipcode </th>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> RequestType</span></td>
                                        <td><span th:text="${listObject[0]}"> Count </span></td>
                                        <td><span th:text="${listObject[2]}"> Zipcode </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'4'" class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th> Request Type </th>
                                        <th> Average </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> Request Type </span></td>
                                        <td><span th:text="${listObject[0]}"> Average </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'5'"  class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th> Request Type </th>
                                        <th> Count </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> Request Type </span></td>
                                        <td><span th:text="${listObject[0]}"> Count </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'6'"  class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th> SSA </th>
                                        <th> Request Type Num </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> SSA </span></td>
                                        <td><span th:text="${listObject[0]}"> Request Type Num </span></td>
                                    </tr>
                                    </tbody>
                                </table>


                                <table  th:case="'7'"  class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th> License plate </th>
                                        <th> Count </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> License plate </span></td>
                                        <td><span th:text="${listObject[0]}"> Count </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'8'"  class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th> Second most common vehicle color </th>
                                        <th> Count </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> Vehicle color </span></td>
                                        <td><span th:text="${listObject[0]}"> Count </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                                <table  th:case="'12'"  class="table table-bordered table-list">
                                    <thead >
                                    <tr >
                                        <th> Busy police districts ids </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr  th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[0]}"> Id </span></td>
                                    </tr>
                                    </tbody>
                                </table>


                            </div>
                            <div class="panel-footer">
                                <div class="row">

                                    <div class="col col-xs-8">
                                        <ul class="pagination  pull-right">
                                            <li ><a class="previous" href="#">Previous</a></li>
                                            <li><a class="next" href="#">Next</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div></div></div>
        </div>

        <div th:if= "${incidentList != null}">
            <div class="container resultTable row" id="resultsObject">
                <div class="row">

                    <div class="col-md-12 col-md-offset-1">

                        <div class="panel panel-default panel-table">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col col-xs-6">
                                        <h3 class="panel-title">Results</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body table-responsive">
                                <table class="table table-bordered table-list">
                                    <thead>
                                    <tr>
                                        <th>Request Type</th>
                                        <th>zipcode</th>
                                        <th>Request number</th>
                                    </tr>
                                    </thead>
                                    <tbody id="myObjTable">
                                    <tr th:each="listObject : ${incidentList}">
                                        <td><span th:text="${listObject.requestType}"> Request Type </span></td>
                                        <td><span th:text="${listObject.district.zipcode}"> Zip Code </span></td>
                                        <td><span th:text="${listObject.serviceRequestNumber}"> Request Num </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                            <div class="panel-footer">
                                <div class="row">
                                    <div class="col col-xs-8">
                                        <ul class="pagination  pull-right">
                                            <li ><a class="previous" href="#">Previous</a></li>
                                            <li><a class="next" href="#">Next</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div></div></div>
        </div>

    </div>
</section>

<div class="footer">
    <p>Project 1 - M149 Database Management Systems - Fall'20</p>
</div>

</body>
</html>
