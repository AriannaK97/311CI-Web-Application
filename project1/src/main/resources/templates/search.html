<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<html lang="en">
<head>
    <title>Search</title>
    <meta charset="utf-8">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap DatePicker</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.11/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.11/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="home2.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="../static/js/search.js"></script>

    <script th:src="@{/js/search.js}"></script>
    <link th:href="@{/css/search.css}" rel="stylesheet" type="text/css" media="all">

    <script>
        $.fn.pageMe = function(opts){
            var $this = this,
                defaults = {
                    perPage: 10,
                    showPrevNext: false,
                    hidePageNumbers: false
                },
                settings = $.extend(defaults, opts);

            var listElement = $this;
            var perPage = settings.perPage;
            var children = listElement.children();
            var pager = $('.pager');

            if (typeof settings.childSelector!="undefined") {
                children = listElement.find(settings.childSelector);
            }

            if (typeof settings.pagerSelector!="undefined") {
                pager = $(settings.pagerSelector);
            }

            var numItems = children.size();
            var numPages = Math.ceil(numItems/perPage);

            pager.data("curr",0);

            if (settings.showPrevNext){
                $('<li><a href="#" class="prev_link">«</a></li>').appendTo(pager);
            }

            var curr = 0;
            while(numPages > curr && (settings.hidePageNumbers==false)){
                $('<li><a href="#" class="page_link">'+(curr+1)+'</a></li>').appendTo(pager);
                curr++;
            }

            if (settings.showPrevNext){
                $('<li><a href="#" class="next_link">»</a></li>').appendTo(pager);
            }

            pager.find('.page_link:first').addClass('active');
            pager.find('.prev_link').hide();
            if (numPages<=1) {
                pager.find('.next_link').hide();
            }
            pager.children().eq(1).addClass("active");

            children.hide();
            children.slice(0, perPage).show();

            pager.find('li .page_link').click(function(){
                var clickedPage = $(this).html().valueOf()-1;
                goTo(clickedPage,perPage);
                return false;
            });
            pager.find('li .prev_link').click(function(){
                previous();
                return false;
            });
            pager.find('li .next_link').click(function(){
                next();
                return false;
            });

            function previous(){
                var goToPage = parseInt(pager.data("curr")) - 1;
                goTo(goToPage);
            }

            function next(){
                goToPage = parseInt(pager.data("curr")) + 1;
                goTo(goToPage);
            }

            function goTo(page){
                var startAt = page * perPage,
                    endOn = startAt + perPage;

                children.css('display','none').slice(startAt, endOn).show();

                if (page>=1) {
                    pager.find('.prev_link').show();
                }
                else {
                    pager.find('.prev_link').hide();
                }

                if (page<(numPages-1)) {
                    pager.find('.next_link').show();
                }
                else {
                    pager.find('.next_link').hide();
                }

                pager.data("curr",page);
                pager.children().removeClass("active");
                pager.children().eq(page+1).addClass("active");

            }
        };

        $(document).ready(function(){

            $('#myListTable').pageMe({pagerSelector:'#myPagerList',showPrevNext:true,hidePageNumbers:false,perPage:30});

        });

        $(document).ready(function (){
            $('#myObjTable').pageMe({pagerSelector:'#myPagerObj',showPrevNext:true,hidePageNumbers:false,perPage:30});
        });
    </script>

    <style>

        .btn{
            width: 103%;
            font-size: 16px;
            font-weight: 400;
            text-transform: capitalize;
            height: calc(4rem + 2px) !important;
            border-radius:0;
        }

        @media (min-width: 992px){
            .search-sec{
                top: -114px;
                background: rgba(26, 70, 104, 0.51)!important;
            }
        }

        @media (max-width: 992px){
            .search-sec{
                background-color: #222!important;
            }
        }

        .container2{
            margin: 0;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-right: -50%;
            transform: translate(-50%, -50%);
        }

        .container{
            margin: 0;
            position: absolute;
            top: 40%;
            left: 55%;
            margin-right: -50%;
            transform: translate(-50%, -50%);
        }

        .row1{
            background-color: #222;
            color: 	whitesmoke;
            position: absolute;
            top: 12%;
            left: 12%;
            padding-left: 5%;
            padding-right: 2%;
            margin-right: -50%;
            transform: translate(-50%, -30%);
            font-weight: bolder;
            font-size: large;
            font-family: Verdana, sans-serif;
        }

        .row2{
            color: 	darkgray;
            font-weight: normal;
            font-style: italic;
            font-family: Verdana, sans-serif;
        }

        .row3{
            position: absolute;
            top: 60%;
            left: 50%;
            border: rgba(0,0,0,0.5);
            margin: 5px -50% 5px 5px;
            transform: translate(-50%, -20%);
            padding: 1% 3% 0 3%;

        }
        .table{
            background-color:#3e3e3e;
            color: whitesmoke;
        }

        .row{
            padding-top: 1%;
        }

/*        .showRow{
            display: none;
        }*/

        .thead-dark{
            color: whitesmoke;
            background-color: #222222;
            border: #cccccc;
        }
        /*for the table*/
        .panel-heading{
            color: whitesmoke;
            background-color: #222222;
            border: #cccccc;
        }

        .panel-table{
            background-color: #222222;
            color: whitesmoke;
        }
        .panel-table .panel-body{
            padding:0;
        }
        .table-responsive {height:400px;}

        .panel-table .panel-body .table-bordered{
            border-style: none;
            margin:0;
        }

        .panel-table .panel-body .table-bordered > thead > tr > th:first-of-type {
            text-align:center;
            width: 100px;
        }

        .panel-table .panel-body .table-bordered > thead > tr > th:last-of-type,
        .panel-table .panel-body .table-bordered > tbody > tr > td:last-of-type {
            border-right: 0px;
        }

        .panel-table .panel-body .table-bordered > thead > tr > th:first-of-type,
        .panel-table .panel-body .table-bordered > tbody > tr > td:first-of-type {
            border-left: 0px;
        }

        .panel-table .panel-body .table-bordered > tbody > tr:first-of-type > td{
            border-bottom: 0px;
        }

        .panel-table .panel-body .table-bordered > thead > tr:first-of-type > th{
            border-top: 0px;
        }

        .panel-table .panel-footer .pagination{
            margin:0;
            color: whitesmoke;
            background-color: #222222;
            border: #cccccc;
        }

        /*
        used to vertically center elements, may need modification if you're not using default sizes.
        */
        .panel-table .panel-footer .col{
            line-height: 34px;
            height: 34px;
        }

        .panel-table .panel-heading .col h3{
            line-height: 30px;
            height: 30px;
        }

        .panel-heading{
            color: whitesmoke!important;
            background-color: #222222 !important;
            border: #cccccc !important;
        }

        .panel-footer{
            color: whitesmoke!important;
            background-color: #222222 !important;
            border: #cccccc !important;
        }

        .panel-table .panel-body .table-bordered > tbody > tr > td{
            line-height: 34px;
        }

        .resultTable{
            position: absolute;
            top: 71%;
            left: 46.9%;
            margin: 22% -50% 0 -5%;
            transform: translate(-50%, -30%);
            padding: 1% 1% 1% 1%;
        }

        /*footer*/

        .footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            background-color: #222;
            color: darkgray;
            text-align: center;
        }

    </style>


</head>
<body>

<header role="banner" class="navbar navbar-fixed-top navbar-inverse">
    <div class="container2">
        <div class="navbar-header">
            <button data-toggle="collapse-side" data-target=".side-collapse" data-target-2=".side-collapse-container" type="button" class="navbar-toggle pull-left"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
        </div>
        <div class="navbar-inverse side-collapse in">
            <nav role="navigation" class="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">Home</a></li>
                    <li><a href="/showInsert">Incident Report</a></li>
                    <li><a href="/search">Search</a></li>
                    <li><a href="/login">Login</a></li>
                    <li><a href="/register">Register</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>
<section>
    <div class="row1">
        <h1>Search</h1>
        <p class="row2">Welcome to Chicago Incident Report Platform</p>
        <p class="row2">To search for an incident, please login or register</p>
    </div>
</section>

<section class="search-sec">
    <div class="container">
        <form th:action="@{/processSearch}" th:object="${searcher}" method="post">
                    <div class="row">
                        <div class="col-lg-8 col-md-6 col-sm-12 input-field ">
                            <select class="form-control search-slt" id="exampleFormControlSelect1" name="searchType" style="white-space: pre-wrap;" >
                                <option value="Other" selected>Select Search option</option>
                                <option value="1">Requests per type that were created within a specified time range</option>
                                <option value="2">Τotal requests per day for a specific request type and time range</option>
                                <option value="3">Μost common service request per zipcode for a specific date</option>
                                <option value="4">Average completion time per service request for a specific date range</option>
                                <option value="5">Most common service request in a specified bounding box for a specific day</option>
                                <option value="6">Top-5 Special Service Areas (SSA) with regards to total number of requests per day
                                    for a specific date range </option>
                                <option value="7">License plates involved in abandoned vehicle complaints more
                                    than once</option>
                                <option value="8">Second most common color of vehicles involved in abandoned vehicle complaints</option>
                                <option value="9">Rodent baiting requests where the number of premises baited is less than a specified
                                    number</option>
                                <option value="10">Rodent baiting requests where the number of premises with garbage is less than a specified
                                    number</option>
                                <option value="11">Rodent baiting requests where the number of premises with rats is less than a specified
                                    number</option>
                                <option value="12">Police districts that have handled “pot holes” requests with more than one number
                                    of potholes on the same day that they also handled “rodent baiting” requests with more than
                                    one number of premises baited, for a specific day</option>
                                <option value="13">Find Incidents by zip code</option>
                                <option value="14">Find Incidents by street address</option>
                                <option value="15">Find incidents by street address and zip code</option>

                            </select>
                        </div>
                    </div>
                    <div class="row" id="showRow" >
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field  " id="secondDate">
                            <input type="date"  name="secondDate" class="form-control search-slt" placeholder="Enter From Date">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="firstDate">
                            <input type="date"  name="firstDate" class="form-control search-slt" placeholder="Enter To Date">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="zipcode">
                            <input type="text"  name="zipcode" class="form-control search-slt" placeholder="Zip Code">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="streetAddress">
                            <input type="text"  name="streetAddress" class="form-control search-slt" placeholder="Street Address">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="premisesBaited">
                            <input  type="text"  name="premisesBaited" class="form-control search-slt" placeholder="Number of baited premises">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="ratPremises">
                            <input  type="text"  name="ratPremises" class="form-control search-slt" placeholder="Number of premises baited with rats">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="garbagePremises">
                            <input  type="text"  name="garbagePremises" class="form-control search-slt" placeholder="Number of premises baited with garbage">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="firstLongitude">
                            <input  type="text"  name="firstLongitude" class="form-control search-slt" placeholder="firstLongitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="secondLongitude">
                            <input type="text"  name="secondLongitude" class="form-control search-slt" placeholder="secondLongitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12   input-field" id="firstLatitude">
                            <input  type="text"  name="firstLatitude" class="form-control search-slt" placeholder="firstLatitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12  input-field" id="secondLatitude">
                            <input type="text"  name="secondLatitude" class="form-control search-slt" placeholder="secondLatitude">
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-12 input-field" id="requestType">
                            <select  name="requestType" class="form-control search-slt">
                                <option>Select Incident Type</option>
                                <option>Pothole in Street</option>
                                <option>Tree Debris</option>
                                <option>Tree Trim</option>
                                <option>Graffiti Removal</option>
                                <option>Street Light - 1/Out</option>
                                <option>Street Lights - All/Out</option>
                                <option>Street Light Out</option>
                                <option>Rodent Baiting/Rat Complaint</option>
                                <option>Sanitation Code Violation</option>
                                <option>Garbage Cart Black Maintenance/Replacement</option>
                                <option>Abandoned Vehicle Complaint</option>
                            </select>
                        </div>

                        <div class="col-lg-3 col-md-3 col-sm-12 submitForm ">
                            <button  type="submit" class="btn btn-success" aria-pressed="true">Search</button>
                        </div>

                    </div>
        </form>

    </div>
</section>

<section>
    <div class="row3">

        <div th:if= "${objectList != null}">
            <div class="container resultTable row" id="resultsList">
                <div class="row">

                    <div class="col-md-12 col-md-offset-1">

                        <div class="panel panel-default panel-table">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col col-xs-6">
                                        <h3 class="panel-title">Results</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body table-responsive">
                                <table class="table table-bordered table-list">
                                    <thead>
                                    <tr>
                                        <th>Request Type</th>
                                        <th>Count</th>
                                    </tr>
                                    </thead>
                                    <tbody id="myListTable">
                                    <tr th:each="listObject : ${objectList}">
                                        <td><span th:text="${listObject[1]}"> Title </span></td>
                                        <td><span th:text="${listObject[0]}"> Author </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                            <div class="panel-footer">
                                <div class="row">

                                    <div class="col col-xs-4">Page 1 of 5
                                    </div>
                                    <div class="col col-xs-8">
                                        <ul class="pagination hidden-xs pull-right" id="myPagerList">
                                        </ul>
                                        <ul class="pagination visible-xs pull-right">
                                            <li><a href="#">«</a></li>
                                            <li><a href="#">»</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div></div></div>
        </div>

        <div th:if= "${incidentList != null}">
            <div class="container resultTable row" id="resultsObject">
                <div class="row">

                    <div class="col-md-12 col-md-offset-1">

                        <div class="panel panel-default panel-table">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col col-xs-6">
                                        <h3 class="panel-title">Results</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body table-responsive">
                                <table class="table table-bordered table-list">
                                    <thead>
                                    <tr>
                                        <th>Request Type</th>
                                        <th>zipcode</th>
                                        <th>Request number</th>
                                    </tr>
                                    </thead>
                                    <tbody id="myObjTable">
                                    <tr th:each="listObject : ${incidentList}">
                                        <td><span th:text="${listObject.requestType}"> Request Type </span></td>
                                        <td><span th:text="${listObject.district.zipcode}"> Zip Code </span></td>
                                        <td><span th:text="${listObject.serviceRequestNumber}"> Request Num </span></td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                            <div class="panel-footer">
                                <div class="row">

                                    <div class="col col-xs-4">Page 1 of 5
                                    </div>
                                    <div class="col col-xs-8">
                                        <ul class="pagination hidden-xs pull-right" id="myPagerObj">
                                        </ul>
                                        <ul class="pagination visible-xs pull-right">
                                            <li><a href="#">«</a></li>
                                            <li><a href="#">»</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div></div></div>
        </div>

    </div>
</section>

<div class="footer">
    <p>Project 1 - M149 Database Management Systems - Fall'20</p>
</div>

</body>
</html>
